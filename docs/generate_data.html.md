# Dataset generation


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

There are several approaches to generate data to start work with
multilayer networks:

1.  Generate synthetic dataset
2.  Generate subset of existing large dataset for faster iterations
3.  Download and prepare for the work real large dataset

## 0. Imports and paths

``` python
path_data = Path("../data")
path_data.mkdir(exist_ok=True)
```

## 1. Generate synthetic dataset

Create a small multilayer graph for testing purposes.

------------------------------------------------------------------------

### obfuscate_nodes

>      obfuscate_nodes (n_nodes:int, node_labels_pool:list[str]=None,
>                       str_len:int=10)

*Maps nodes from range \[0, n_nodes) to unique random strings of length
str_len. All upper case letters and digits are used, starts with a
letter. If node_labels_pool is provided, nodes selected from it if
len(node_labels_pool) \>= n_nodes, otherwise, additional unique nodes
are generated.*

``` python
d = obfuscate_nodes(n_nodes=3)
d
```

    {0: 'P859FBHXV3', 1: 'DAH2WV1U39', 2: 'DQW5XMM3CG'}

``` python
node_labels_pool = ['TI672Y15ZU', 'S0SM5PZWDN','G54WMQPO11']
d = obfuscate_nodes(n_nodes=2, node_labels_pool=node_labels_pool)
d
```

    {0: 'TI672Y15ZU', 1: 'S0SM5PZWDN'}

``` python
d = obfuscate_nodes(n_nodes=5, node_labels_pool=node_labels_pool)
d
```

    {0: 'TI672Y15ZU',
     1: 'WG4IGPGTKY',
     2: 'G54WMQPO11',
     3: 'IHSNALFLAJ',
     4: 'S0SM5PZWDN'}

The following is a thin wrapper around the random graph generators from
[networkx](https://networkx.org/documentation/stable/reference/generators.html#module-networkx.generators.random_graphs)
package.

------------------------------------------------------------------------

### create_random_graph

>      create_random_graph (generator:<built-infunctioncallable>,
>                           obfuscate:bool=True,
>                           node_labels_pool:list[str]=None, **kwargs)

\*Thin wrapper around networkx’s random graph generator

Args: generator (callable): networkx’s random graph generator
\*\*kwargs: passed to generator Example: \>\>\> G =
create_random_graph(nx.erdos_renyi_graph, n=10, p=0.6, directed=False)\*

``` python
node_labels_pool
```

    ['TI672Y15ZU', 'S0SM5PZWDN', 'G54WMQPO11']

``` python
G = create_random_graph(nx.erdos_renyi_graph, node_labels_pool=node_labels_pool, n=5, p=0.6, directed=False)
```

``` python
G.nodes()
```

    NodeView(('S0SM5PZWDN', 'RID89IMSBE', 'G54WMQPO11', 'TI672Y15ZU', 'B5N8HDG5QV'))

Create random graph and write it to the disk:

------------------------------------------------------------------------

### create_and_save_random_graph

>      create_and_save_random_graph (generator:<built-infunctioncallable>,
>                                    label_edges:str, path_to:str|pathlib.Path,
>                                    obfuscate:bool=True,
>                                    node_labels_pool:list[str]=None, **kwargs)

\*Creates a random graph and saves it to path_to.

Args: generator (callable): networkx’s random graph generator obfuscate
(bool, optional): if true, obfuscates node names. Defaults to True.
path_to (str|Path, optional): path to save the graph. Defaults to None.

Example: \>\>\> create_random_graph_and_save(nx.erdos_renyi_graph, n=10,
p=0.6, directed=False, path_to=path_data / ‘synthetic’ / ‘1.csv’)\*

Create three layers. For experiments with CmmD algorithm we need at
least several hundreds of nodes to see the difference in the clustering
with a variety of *γ* values:

``` python
path_dir_to = path_data / 'synthetic'
path_dir_to.mkdir(exist_ok=True)
```

``` python
node_labels_pool = []

n, p, label_edges = 300, 0.2, "first"
G_1 = create_and_save_random_graph(nx.erdos_renyi_graph, label_edges, path_dir_to / '1.csv',
                                   obfuscate=True, node_labels_pool=node_labels_pool, n=n, p=p)
node_labels_pool.extend(list(G_1.nodes()))

n, p, label_edges = 500, 0.2, "second"
G_2 = create_and_save_random_graph(nx.erdos_renyi_graph, label_edges, path_dir_to / '2.csv',
                                   obfuscate=True, node_labels_pool=node_labels_pool, n=n, p=p)
node_labels_pool.extend(list(G_2.nodes()))

n, p, label_edges = 400, 0.2, "third"
G_3 = create_and_save_random_graph(nx.erdos_renyi_graph, label_edges, path_dir_to / '3.csv',
                                   obfuscate=True, node_labels_pool=node_labels_pool, n=n, p=p)
node_labels_pool.extend(list(G_3.nodes()))
```
